{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./scripts/constants.js","webpack:///./scripts/helpers.js","webpack:///./scripts/lazyload.js","webpack:///./scripts/app.js","webpack:///./scripts/tab.js","webpack:///./scripts/search.js","webpack:///./scripts/toplist.js","webpack:///./scripts/recommend.js","webpack:///./scripts/slider.js","webpack:///./scripts/music_player.js","webpack:///./scripts/progress_bar.js","webpack:///./scripts/lyrics_player.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","RECOMMEND_URL","TOPLIST_URL","SEARCH_URL","LYRICS_URL","songUrl","id","lyricsUrl","songid","albumCoverUrl","searchUrl","keyword","page","arguments","length","undefined","_constants","loadImage","img","callback","image","Image","src","dataset","onload","classList","remove","lazyload","images","imgs","slice","document","querySelectorAll","window","observer","IntersectionObserver","entries","forEach","entry","intersectionRatio","target","unobserve","threshold","observe","onscroll","func","wait","prev","timer","fn","curr","Date","now","diff","clearTimeout","setTimeout","throttle","removeEventListener","filter","contains","_img$getBoundingClien","getBoundingClientRect","top","left","right","bottom","vpWidth","documentElement","clientWidth","vpHeight","clientHeight","inViewport","addEventListener","dispatchEvent","Event","_search","_toplist","_recommend","_music_player","player","Search","querySelector","MusicPlayer","TopList","launch","Recommend","onHashChange","hash","location","test","matches","indexOf","match","options","reduce","res","cur","arr","split","decodeURIComponent","play","hide","show","initialTabActive","myhash","substr","lis","Array","li","contentTab","view","style","display","add","initialTabView","event","role","content","parentElement","children","tab","child","console","log","_helpers","el","_classCallCheck","this","$el","$input","onKeyUp","$songs","songs","perpage","nomore","fetching","onScroll","trim","reset","keyCode","search","pageYOffset","body","scrollHeight","innerHTML","_this","loading","fetch","then","json","data","song","curpage","list","message","append","done","catch","html","map","artist","singer","join","songmid","songname","albummid","interval","insertAdjacentHTML","_lazyload","topList","render","_this2","item","picUrl","replace","topTitle","songlist","songList","singername","_slider","renderSlider","slider","renderRadios","radioList","renderPlayLists","slides","Slider","slide","link","linkUrl","radios","radio","Ftitle","playlists","songListDesc","duration","index","start","$wrap","firstElementChild","transitionDuration","width","setInterval","next","transform","_progress_bar","_lyrics_player","$audio","createAudio","lyrics","LyricsPlayer","progress","ProgressBar","audio","createElement","Math","floor","random","restart","appendChild","onPlay","onPause","pause","innerText","coverUrl","backgroundImage","className","lyric","text","elapsed","$progress","$elapsed","$duration","formatTime","intervalId","update","clearInterval","seconds","mins","secs","$lines","round","currentTime","getSeconds","y","LINE_HEIGHT","line","$active","formatText","p1","p2","div"],"mappings":"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","file":"dist/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","export const RECOMMEND_URL = 'https://qq-music-api.now.sh'\nexport const TOPLIST_URL = 'https://qq-music-api.now.sh/top'\nexport const SEARCH_URL = 'https://qq-music-api.now.sh/search'\nexport const LYRICS_URL = 'https://qq-music-api.now.sh/lyrics'\n\n// export const RECOMMEND_URL = 'http://localhost:4000/'\n// export const SEARCH_URL = 'http://localhost:4000/search'\n// export const LYRICS_URL = 'http://localhost:4000/lyrics'"," import { LYRICS_URL, SEARCH_URL } from './constants.js'\n export function songUrl(id) {\n     return `http://ws.stream.qqmusic.qq.com/C100${id}.m4a?fromtag=0&guid=126548448`\n }\n\n export function lyricsUrl(songid) {\n     return `${LYRICS_URL}?id=${songid}`\n }\n\n export function albumCoverUrl(id) {\n     return `https://y.gtimg.cn/music/photo_new/T002R150x150M000${id}.jpg`\n }\n\n export function searchUrl(keyword, page = 1) {\n     return `${SEARCH_URL}?keyword=${keyword}&page=${page}`\n }","export function lazyload(images) {\n    let imgs = [].slice.call(images || document.querySelectorAll('.lazyload')) // Array.from(images)\n\n    if ('IntersectionObserver' in window) {\n        let observer = new IntersectionObserver(function (entries) {\n            entries.forEach(entry => {\n                if (entry.intersectionRatio > 0) {\n                    loadImage(entry.target, () => {\n                        observer.unobserve(entry.target)\n                    })\n                }\n            })\n        }, {\n            threshold: 0.01\n        })\n\n        imgs.forEach(img => observer.observe(img))\n    } else {\n        let onscroll = throttle(function () {\n            if (imgs.length === 0) {\n                return window.removeEventListener('scroll', onscroll)\n            }\n            imgs = imgs.filter(img => img.classList.contains('lazyload'))\n            imgs.forEach(img => inViewport(img) && loadImage(img))\n        }, 300)\n\n        window.addEventListener('scroll', onscroll)\n        window.dispatchEvent(new Event('scroll'))\n    }\n}\n\nfunction throttle(func, wait) {\n    let prev, timer\n    return function fn() {\n        let curr = Date.now()\n        let diff = curr - prev\n        if (!prev || diff >= wait) {\n            func()\n            prev = curr\n        } else if (diff < wait) {\n            clearTimeout(timer)\n            timer = setTimeout(fn, wait - diff)\n        }\n    }\n}\n\nfunction inViewport(img) {\n    let {\n        top,\n        left,\n        right,\n        bottom\n    } = img.getBoundingClientRect()\n    let vpWidth = document.documentElement.clientWidth\n    let vpHeight = document.documentElement.clientHeight\n    return (\n        (top > 0 && top < vpHeight || bottom > 0 && bottom < vpHeight) &&\n        (left > 0 && left < vpWidth || right > 0 && right < vpWidth)\n    )\n}\n\nfunction loadImage(img, callback) {\n    let image = new Image()\n    image.src = img.dataset.src\n    image.onload = function () {\n        img.src = image.src\n        img.classList.remove('lazyload')\n        if (typeof callback === 'function') callback()\n    }\n}","import './tab.js'\nimport {\n    Search\n} from './search.js'\nimport {\n    TopList\n} from './toplist.js'\nimport {\n    Recommend\n} from './recommend.js'\nimport {\n    MusicPlayer\n} from './music_player.js'\n\nlet search = new Search(document.querySelector('#search-view'))\nlet player = new MusicPlayer(document.querySelector('#player'))\nlet toplist = new TopList(document.querySelector('#rank-view')).launch()\nlet recommend = new Recommend(document.querySelector('#rec-view')).launch()\n\ndocument.querySelector('.show-player').addEventListener('click', () => {\n    player.show()\n})\n\nonHashChange()\naddEventListener('hashchange', onHashChange)\n\nfunction onHashChange() {\n    let hash = location.hash\n    if (/^#player\\?.+/.test(hash)) {\n        let matches = hash.slice(hash.indexOf('?') + 1).match(/(\\w+)=([^&]+)/g)\n        let options = matches && matches.reduce((res, cur) => {\n            let arr = cur.split('=')\n            res[arr[0]] = decodeURIComponent(arr[1])\n            return res\n        }, {})\n        player.play(options)\n    } else {\n        player.hide()\n    }\n}","initialTabView(location.hash)\ndocument.addEventListener('click', function (event) {\n    let target = event.target\n    if (target.dataset.role !== 'tab') return\n    let content = document.querySelector(target.dataset.view)\n    location.hash = target.dataset.view\n    Array.prototype.forEach.call(target.parentElement.children, tab => {\n        tab.classList.remove(\"active\")\n    })\n    target.classList.add(\"active\");\n    if (content) {\n        Array.prototype.forEach.call(content.parentElement.children, child => child.style.display = 'none')\n        content.style.display = 'block'\n    }\n})\nconsole.log(location.hash)\n\nfunction initialTabView(hash) {\n    switch (hash) {\n        case \"#.rec-view\":\n            initialTabActive(hash);\n            break;\n        case \"#.rank-view\":\n            initialTabActive(hash);\n            break;\n        case \"#.search-view\":\n            initialTabActive(hash);\n            break;\n    }\n}\n\nfunction initialTabActive(hash) {\n    let myhash = hash.substr(1);\n    let lis = document.querySelectorAll(\".nav-item\")\n    Array.prototype.forEach.call(lis, (li) => {\n        let contentTab = document.querySelector(li.dataset.view)\n        contentTab.style.display = 'none'\n        li.classList.remove('active')\n        if (li.dataset.view === myhash) {\n            li.classList.add('active')\n            contentTab.style.display = 'block'\n        }\n    })\n}","import {\n    searchUrl\n} from './helpers.js'\n\nexport class Search {\n    constructor(el) {\n        this.$el = el\n        this.$input = this.$el.querySelector('#search')\n        this.$input.addEventListener('keyup', this.onKeyUp.bind(this))\n        this.$songs = this.$el.querySelector('.song-list')\n        this.page = 1\n        this.songs = {}\n        this.keyword = ''\n        this.perpage = 20\n        this.nomore = false\n        this.fetching = false\n        this.onscroll = this.onScroll.bind(this)\n        window.addEventListener('scroll', this.onscroll)\n    }\n\n    onKeyUp(event) {\n        let keyword = event.target.value.trim()\n        if (!keyword) return this.reset()\n        if (event.keyCode !== 13) return\n        this.search(keyword)\n    }\n\n    onScroll(event) {\n        if (this.nomore) return window.removeEventListener('scroll', this.onscroll)\n        if (pageYOffset + document.documentElement.clientHeight > document.body.scrollHeight - 50) {\n            this.search(this.keyword, this.page + 1)\n        }\n    }\n\n    reset() {\n        this.page = 1\n        this.songs = {}\n        this.keyword = ''\n        this.nomore = false\n        this.$songs.innerHTML = ''\n    }\n\n    search(keyword, page) {\n        if (this.keyword === keyword && this.songs[page || this.page]) return\n        if (this.nomore || this.fetching) return\n        if (this.keyword !== keyword) this.reset()\n        this.keyword = keyword\n        this.loading()\n        fetch(searchUrl(this.keyword, page || this.page))\n            .then(res => res.json())\n            .then(json => {\n                this.page = json.data.song.curpage\n                this.songs[this.page] = json.data.song.list\n                this.nomore = json.message === 'no results'\n                return json.data.song.list\n            })\n            .then(songs => this.append(songs))\n            .then(() => this.done())\n            .catch(() => this.fetching = false)\n    }\n\n    append(songs) {\n        let html = songs.map(song => {\n            let artist = song.singer.map(s => s.name).join(' ')\n            return `\n        <a class=\"song-item\"\n           href=\"#player?artist=${artist}&songmid=${song.songmid}&songid=${song.songid}&songname=${song.songname}&albummid=${song.albummid}&duration=${song.interval}\">\n          <i class=\"icon icon-music\"></i>\n          <div class=\"song-name ellipsis\">${song.songname}</div>\n          <div class=\"song-artist ellipsis\">${artist}</div>\n        </a>`\n        }).join('')\n        this.$songs.insertAdjacentHTML('beforeend', html)\n    }\n\n    loading() {\n        this.fetching = true\n        this.$el.querySelector('.search-loading').classList.add('show')\n    }\n\n    done() {\n        this.fetching = false\n        if (this.nomore) {\n            this.$el.querySelector('.loading-icon').style.display = 'none'\n            this.$el.querySelector('.loading-text').style.display = 'none'\n            this.$el.querySelector('.loading-done').style.display = 'block'\n            this.$el.querySelector('.search-loading').classList.add('show')\n        } else {\n            this.$el.querySelector('.search-loading').classList.remove('show')\n        }\n    }\n\n}","import {\n    lazyload\n} from './lazyload.js'\nimport {\n    TOPLIST_URL\n} from './constants.js'\n\nexport class TopList {\n    constructor(el) {\n        this.$el = el\n    }\n\n    launch() {\n        fetch(TOPLIST_URL)\n            .then(res => res.json())\n            .then(json => this.list = json.data.topList)\n            .then(() => this.render())\n        return this\n    }\n\n    render() {\n        this.$el.querySelector('.toplist').innerHTML = this.list.map(item =>\n            `<li class=\"top-item\">\n        <div class=\"top-item-media\">\n          <a href=\"#\">\n            <img class=\"lazyload\" data-src=\"${item.picUrl.replace('http://', 'https://')}\">\n          </a>\n        </div>\n        <div class=\"top-item-info\">\n          <h3 class=\"top-item-title ellipsis\">${item.topTitle}</h3>\n          <ul class=\"top-item-list\">${this.songlist(item.songList)}</ul>\n        </div>\n      </li>`).join('')\n\n        lazyload(this.$el.querySelectorAll('.lazyload'))\n    }\n\n    songlist(songs) {\n        return songs.map((song, i) =>\n            `<li class=\"top-item-song\">\n        <i class=\"song-index\">${i + 1}</i>\n        <span class=\"song-name\">${song.songname}</span>- ${song.singername}\n      </li>`).join('')\n    }\n}","import {\n    Slider\n} from './slider.js'\nimport {\n    lazyload\n} from './lazyload.js'\nimport {\n    RECOMMEND_URL\n} from './constants.js'\n\nexport class Recommend {\n    constructor(el) {\n        this.$el = el\n    }\n\n    launch() {\n        fetch(RECOMMEND_URL)\n            .then(res => res.json())\n            .then(json => this.json = json)\n            .then(() => this.render())\n        return this\n    }\n\n    render() {\n        this.renderSlider(this.json.data.slider)\n        this.renderRadios(this.json.data.radioList)\n        this.renderPlayLists(this.json.data.songList)\n        lazyload()\n    }\n\n    renderSlider(slides) {\n        this.slider = new Slider({\n            el: this.$el.querySelector('#slider'),\n            slides: slides.map(slide => ({\n                link: slide.linkUrl.replace('http://', 'https://'),\n                image: slide.picUrl.replace('http://', 'https://')\n            }))\n        })\n    }\n\n    renderRadios(radios) {\n        this.$el.querySelector('.radios .list').innerHTML = radios.map(radio =>\n            `<div class=\"list-item\">\n        <div class=\"list-media\">\n          <img class=\"lazyload\" data-src=\"${radio.picUrl}\">\n          <span class=\"icon icon-play\"></span>\n        </div>\n        <div class=\"list-detail\">\n          <h3 class=\"list-title\">${radio.Ftitle}</h3>\n        </div>\n      </div>`).join('')\n    }\n\n    renderPlayLists(playlists) {\n        this.$el.querySelector('.hotlists .list').innerHTML = playlists.map(list =>\n            `<div class=\"list-item\">\n        <div class=\"list-media\">\n          <img class=\"lazyload\" data-src=\"${list.picUrl}\">\n          <span class=\"icon icon-play\"></span>\n        </div>\n        <div class=\"list-detail\">\n          <h3 class=\"list-title\">${list.songListDesc}</h3>\n          <div class=\"list-text\"></div>\n        </div>\n      </div>`).join('')\n    }\n}","export class Slider {\n    constructor(options = {}) {\n        this.$el = options.el\n        this.slides = options.slides\n        this.interval = options.interval || 3000\n        this.duration = options.duration || 300\n        this.index = 0\n        this.render()\n        this.start()\n    }\n\n    render() {\n        this.$el.innerHTML = `<div class=\"qq-slider-wrap\"></div>`\n        this.$wrap = this.$el.firstElementChild\n        this.$wrap.style.transitionDuration = `${this.duration}ms`\n        this.$wrap.style.width = `${this.slides.length * 100}%`\n        this.$wrap.innerHTML = this.slides.map(slide =>\n            `<div class=\"qq-slider-item\">\n            <a href=\"${slide.link}\">\n              <img src=\"${slide.image}\">\n            </a>\n        </div>`\n        ).join('')\n    }\n\n    start() {\n        setInterval(this.next.bind(this), this.interval)\n    }\n\n    next() {\n        this.index += 1\n        if (this.index === this.slides.length) {\n            this.$wrap.style.transform = `translate(0)`\n            this.index = 0\n            return\n        }\n        this.$wrap.style.transform = `translate(-${this.index * 100 / this.slides.length}%)`\n    }\n}","import {\n    ProgressBar\n} from './progress_bar.js'\nimport {\n    LyricsPlayer\n} from './lyrics_player.js'\nimport {\n    songUrl,\n    lyricsUrl,\n    albumCoverUrl\n} from './helpers.js'\n\nexport class MusicPlayer {\n    constructor(el) {\n        this.$el = el\n        this.$el.addEventListener('click', this)\n        this.$audio = this.createAudio()\n        this.lyrics = new LyricsPlayer(this.$el.querySelector('.player-lyrics'), this.$audio)\n        this.progress = new ProgressBar(this.$el.querySelector('.progress'))\n        this.fetching = false\n    }\n\n    createAudio() {\n        let audio = document.createElement('audio')\n        audio.id = `player-${Math.floor(Math.random() * 100)}-${+new Date()}`\n        audio.addEventListener('ended', () => {\n            this.$audio.play()\n            this.lyrics.restart()\n            this.progress.restart()\n        })\n        document.body.appendChild(audio)\n        return audio\n    }\n\n    handleEvent(event) {\n        let target = event.target\n        switch (true) {\n            case target.matches('.icon-play'):\n                this.onPlay(event)\n                break\n            case target.matches('.icon-pause'):\n                this.onPause(event)\n                break\n            case target.matches('.icon-list'):\n                this.hide()\n                break\n        }\n    }\n\n    onPlay(event) {\n        if (this.fetching) return\n        this.$audio.play()\n        this.lyrics.start()\n        this.progress.start()\n        event.target.classList.add('icon-pause')\n        event.target.classList.remove('icon-play')\n    }\n\n    onPause(event) {\n        this.$audio.pause()\n        this.lyrics.pause()\n        this.progress.pause()\n        event.target.classList.add('icon-play')\n        event.target.classList.remove('icon-pause')\n    }\n\n    play(options = {}) {\n        if (!options) return\n\n        this.$el.querySelector('.song-name').innerText = options.songname\n        this.$el.querySelector('.song-artist').innerText = options.artist\n        this.progress.reset(options.duration)\n\n        let coverUrl = albumCoverUrl(options.albummid)\n        this.$el.querySelector('.album-cover').src = coverUrl\n        this.$el.querySelector('.player-background').style.backgroundImage = `url(${coverUrl})`\n\n        if (options.songid) {\n            if (this.songid !== options.songid) {\n                this.$el.querySelector('.icon-action').className = 'icon-action icon-play'\n            }\n\n            this.songmid = options.songmid\n            this.$audio.src = songUrl(this.songmid)\n            this.fetching = true\n            fetch(lyricsUrl(this.songid))\n                .then(res => res.json())\n                .then(json => json.lyric)\n                .then(text => this.lyrics.reset(text))\n                .catch(() => {})\n                .then(() => this.fetching = false)\n        }\n\n        this.show()\n    }\n\n    show() {\n        this.$el.classList.add('show')\n        document.body.classList.add('noscroll')\n    }\n\n    hide() {\n        this.$el.classList.remove('show')\n        document.body.classList.remove('noscroll')\n    }\n}","export class ProgressBar {\n    constructor(el, duration, start) {\n        this.$el = el\n        this.elapsed = 0\n        this.duration = duration || 0\n        this.progress = 0\n        this.render()\n        this.$progress = this.$el.querySelector('.progress-bar-progress')\n        this.$elapsed = this.$el.querySelector('.progress-elapsed')\n        this.$duration = this.$el.querySelector('.progress-duration')\n        this.$elapsed.innerText = this.formatTime(this.elapsed)\n        this.$duration.innerText = this.formatTime(this.duration)\n        if (start) this.start()\n    }\n\n    start() {\n        this.pause()\n        this.intervalId = setInterval(this.update.bind(this), 50)\n    }\n\n    pause() {\n        clearInterval(this.intervalId)\n    }\n\n    update() {\n        this.elapsed += 0.05\n        if (this.elapsed >= this.duration) this.reset()\n        this.progress = this.elapsed / this.duration\n        this.$progress.style.transform = `translate(${this.progress * 100 - 100}%)`\n        this.$elapsed.innerText = this.formatTime(this.elapsed)\n    }\n\n    reset(duration) {\n        this.pause()\n        this.elapsed = 0\n        this.progress = 0\n        this.$progress.style.transform = `translate(-100%)`\n        this.$elapsed.innerText = this.formatTime(this.elapsed)\n        if (duration) {\n            this.duration = +duration\n            this.$duration.innerText = this.formatTime(this.duration)\n        }\n    }\n\n    restart() {\n        this.reset()\n        this.start()\n    }\n\n    render() {\n        this.$el.innerHTML = `\n        <div class=\"progress-time progress-elapsed\"></div>\n          <div class=\"progress-bar\">\n            <div class=\"progress-bar-progress\"></div>\n          </div>\n        <div class=\"progress-time progress-duration\"></div>\n      `\n    }\n\n    formatTime(seconds) {\n        let mins = Math.floor(seconds / 60)\n        let secs = Math.floor(seconds % 60)\n        if (mins < 10) mins = '0' + mins\n        if (secs < 10) secs = '0' + secs\n        return `${mins}:${secs}`\n    }\n}","export class LyricsPlayer {\n    constructor(el, audio) {\n        this.$el = el\n        this.$el.innerHTML = '<div class=\"player-lyrics-lines\"></div>'\n        this.$lines = this.$el.querySelector('.player-lyrics-lines')\n        this.$audio = audio\n        this.text = ''\n        this.index = 0\n        this.lyrics = []\n        this.elapsed = 0\n        this.reset(this.text)\n    }\n\n    start() {\n        this.pause()\n        this.intervalId = setInterval(this.update.bind(this), 1000)\n    }\n\n    pause() {\n        clearInterval(this.intervalId)\n    }\n\n    update() {\n        this.elapsed = Math.round(this.$audio ? this.$audio.currentTime : this.elapsed + 1)\n        if (this.index === this.lyrics.length - 1) return\n        for (let i = this.index + 1; i < this.lyrics.length; i++) {\n            let seconds = this.getSeconds(this.lyrics[i])\n            if (\n                this.elapsed === seconds &&\n                (!this.lyrics[i + 1] || this.elapsed < this.getSeconds(this.lyrics[i + 1]))\n            ) {\n                this.$lines.children[this.index].classList.remove('active')\n                this.$lines.children[i].classList.add('active')\n                this.index = i\n                break\n            }\n        }\n        if (this.index > 2) {\n            let y = -(this.index - 2) * this.LINE_HEIGHT\n            this.$lines.style.transform = `translateY(${y}px)`\n        }\n    }\n\n    render() {\n        let html = this.lyrics.map(line => `\n        <div class=\"player-lyrics-line\">${line.slice(10)}</div>\n      `).join('')\n        this.$lines.innerHTML = html\n    }\n\n    reset(text) {\n        this.pause()\n        this.index = 0\n        this.elapsed = 0\n\n        this.$lines.style.transform = `translateY(0)`\n        let $active = this.$lines.querySelector('.active')\n        if ($active) {\n            $active.classList.remove('active')\n        }\n\n        if (text) {\n            this.text = this.formatText(text) || ''\n            this.lyrics = this.text.match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm) || []\n            if (this.lyrics.length) this.render()\n        }\n\n        if (this.lyrics.length) {\n            this.$lines.children[this.index].classList.add('active')\n        }\n    }\n\n    restart() {\n        this.reset()\n        this.start()\n    }\n\n    getSeconds(line) {\n        return +line.replace(/^\\[(\\d{2}):(\\d{2}).*/, (match, p1, p2) => 60 * (+p1) + (+p2))\n    }\n\n    formatText(text) {\n        let div = document.createElement('div')\n        div.innerHTML = text\n        return div.innerText\n    }\n}\n\nLyricsPlayer.prototype.LINE_HEIGHT = 42"],"sourceRoot":""}